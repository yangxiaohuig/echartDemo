<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html,body {
            background-color: #0B0B0B;
        }
    </style>

</head>
<body>
<div id="HartHotlineproblemRightEcharts" style="width: 800px;height: 500px;"></div>
<script src="lib/jquery/jquery.min.js"></script>
<script src="lib/echarts/echarts.min.js"></script>
<script>


    var data = [
        {
            proportion: "7.55",
            order_amount: "3642",
            typename: "交通管理"},
        {
            proportion: "3.03",
            order_amount: "1461",
            typename: "供水"},
        {
            proportion: "5.34",
            order_amount: "2574",
            typename: "市容环卫"},
        {
            proportion: "2.52",
            order_amount: "1216",
            typename: "供电"},
        {
            proportion: "1.25",
            order_amount: "603",
            typename: "群租房"},
        {
            proportion: "3.88",
            order_amount: "1872",
            typename: "公共安全"},
        {
            proportion: "3.26",
            order_amount: "1573",
            typename: "小区配套"},
        {
            proportion: "3.07",
            order_amount: "1480",
            typename: "住房修缮"},
        {
            proportion: "6.15",
            order_amount: "2967",
            typename: "违法建设"},
        {
            proportion: "3.31",
            order_amount: "1595",
            typename: "社会建设"},
        {
            proportion: "2.07",
            order_amount: "997",
            typename: "拆迁"},
        {
            proportion: "3.97",
            order_amount: "1916",
            typename: "农村管理"},
        {
            proportion: "4.49",
            order_amount: "2164",
            typename: "城市绿化"},
        {
            proportion: "9.52",
            order_amount: "4591",
            typename: "环境保护"},
        {
            proportion: "1.38",
            order_amount: "667",
            typename: "劳动和社会保障"},
        {
            proportion: "1.62",
            order_amount: "783",
            typename: "卫生健康"},
        {
            proportion: "5.81",
            order_amount: "2803",
            typename: "市政"},
        {
            proportion: "7.11",
            order_amount: "3427",
            typename: "施工管理"},
        {
            proportion: "9.84",
            order_amount: "4743",
            typename: "市场管理"},
        {
            proportion: "6.02",
            order_amount: "2904",
            typename: "物业管理"
        }
    ];

        if (data && data.length > 0) {
            for (var i = 0; i < data.length; i++) {
                var dataEchares = data.map(function(item, index) {
                    return {
                        name: item.typename,
                        value: item.order_amount,
                        pro: item.proportion,
                    }
                });
            }
            var myChart = echarts.init(document.getElementById("HartHotlineproblemRightEcharts"));
            var option = {
                //显示series中信息，提示框组件
                axisLabel: {
                    textStyle: {
                        fontSize: 20
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function(param) {
                        var str =`${param.name}:${param.value}(${param.data.pro}%)`;
                        return str;
                    },
                    fontSize: 20
                },

                series: [{
                    name: '',
                    axisLabel: {
                        textStyle: {
                            fontSize: 20
                        }
                    },
                    type: 'pie', //图表类型，柱状图：bar
                    //饼图：pie  (南丁格尔图在series中加上roseType:’angle’)移开后不显示原来信息
                    radius: '45%', //半径
                    center: ['50%', '50%'],
                    label: {
                        formatter: function(param) {
                            var str=`{a|${param.name}}{b|${param.value}}件{c|${param.data.pro}%}`
                            return str;
                        },
                        rich: {
                            b: {
                                color: '#b71623',
                                align: 'center',
                                fontSize: 20,
                            },
                            c: {
                                fontSize: 20,
                                align: 'center',
                                color: '#109915',
                            },

                        },
                        fontSize: 17,
                        color: '#fff'
                    },

                    data: dataEchares,
                    itemStyle: { //itemStyle有正常显示：normal，有鼠标hover的高亮显示：emphasis
                        emphasis: { //normal显示阴影,与shadow有关的都是阴影的设置
                            shadowBlur: 10, //阴影大小
                            shadowOffsetX: 0, //阴影水平方向上的偏移
                            shadowColor: 'rgba(0, 0, 0, 0.5)' //阴影颜色
                        },
                        textStyle: {
                            fontSize: 20
                        }
                    },
                    labelLine: {
                        normal: {
                            lineStyle: {
                                color: 'rgb(98,137,169)',
                            },
                            smooth: 0.2,
                            length: 20,


                        }
                    },
                }]

            }
            myChart.setOption(option);
        } else {
            var str = "";
            str += '<div class="HartanasSpecial">暂无数据</div>'
            $("#HartHotlineproblemRightEcharts").html(str)
        }

</script>
</body>
</html>